define(["base","pagingTpl","juicer"],function(a,e,t){function n(a){function e(){}e.prototype=s,(new e).init(a)}var s={init:function(e){var t=parseInt(e.total,10),n=parseInt(e.pageSize,10),s=parseInt((t+n-1)/n),g=this;this.changePage(e),e.$dom.undelegate(),e.$dom.delegate(".j_firstPage , .j_prvPage , .j_changePage ,.j_nextPage ,.j_lastPage","click",function(){var e=1,t=a(this),n=g.pagingObj,i=parseInt(n.pageIndex);if(t.hasClass("j_firstPage"))e=1==i?-1:1;else if(t.hasClass("j_prvPage"))e=i>1?i-1:-1;else if(t.hasClass("j_changePage")){var r=t.find("a").html();e=r==i?-1:r}else t.hasClass("j_nextPage")?e=i>=s?-1:i+1:t.hasClass("j_lastPage")&&(e=i>=s?-1:s);if(e>0){n.pageIndex=e,g.changePage(n);var l;n&&(l=n.callback)&&l(n)}})},changePage:function(a){this.pagingObj=a;var t=parseInt(a.total),n=parseInt(a.pageSize),s=parseInt(a.pageIndex),g=parseInt((t+n-1)/n),i=a.$dom,r=g>5?5:g,l=1,p=parseInt((r+1)/2);g<=5||s<p?l=1:s+p>g?l=g-5+1:l=s-p+1;for(var h=[],c=0;c<r;c++)h.push(l+c);if(g>0){var o=juicer.to_html(e,{total:t,totalPage:g,itemArray:h,currentIndex:s});i.html(o)}else i.html("")}};return n});